\documentclass{beamer}
% Language/Font package
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

% Base package
\usepackage{graphicx}
\usepackage{color}
\usepackage{listings}
\usepackage{hyperref}
\usepackage{todonotes}

\usepackage{comment}

\newcommand{\fullslideimage}[1]{%
\begin{frame}[plain]
\begin{tikzpicture}[remember picture,overlay]
    \node[at=(current page.center)] {
        \includegraphics[width=\paperwidth]{#1}
    };
\end{tikzpicture}
\end{frame}}

% Configuration
\definecolor{ligthYellow}{RGB}{255,255,229}

% Theme https://github.com/matze/mtheme
\usetheme[progressbar=frametitle]{metropolis}

\usepackage[french]{babel}

% Title
\title{Présentation Git}
\subtitle{Un outil de collaboration puissant}
\date{1\ier Mars 2018}
\author{Gaëtan Cassiers \and Alexandre Fiset \and Pierre Ortegat}
\institute{KAP Louvain-li-Nux}
\titlegraphic{\hfill\includegraphics[height=2cm]{img/logo.png}}

\begin{document}

% slides pré-atelier pour les personnes en avance
\begin{frame}
\begin{center}
  Suivez cette présentation sur votre ordinateur :

  \fbox{\Large\url{https://louvainlinux.org/atelier-git}}
\end{center}

Préparez-vous à utiliser \texttt{git} :
vous utiliserez le logiciel GitHub Desktop durant cette présentation.

Prenez un peu d'avance, installez-le:
\begin{itemize}
    \item Sur les ordinateur Windows UCL: suivez les instructions à l'addresse \url{https://louvainlinux.org/git-windows-ucl}.
    \item Ou installez GitHub Desktop sur votre ordinateur :
    \begin{itemize}
        \item \textbf{Ubuntu} : TODO: Tester RC et lien
        \item \textbf{Windows ou OS X} : \url{https://desktop.github.com}
    \end{itemize}
\end{itemize}
\end{frame}


\maketitle

\begin{frame}{Cette présentation}
    \begin{itemize}
        \item Cette présentation est sous license libre CC-BY 4.0.
        \item En ligne (slides en pdf et sources \LaTeX, exercices\ldots):
            \url{https://github.com/louvainlinux/atelier-git}
    \end{itemize}
\end{frame}

\begin{frame}{Table des matières}

\setbeamertemplate{section in toc}[sections numbered]
\tableofcontents[hideallsubsections]

\end{frame}

\section{Introduction}

\begin{frame}{Gérer un projet}
Comment gérez-vous actuellement un projet ?

\begin{itemize}
    \item L'envoyer à travers un message sur Facebook, ... (\textbf{Très mauvaise idée})
    \item L'envoyer par mail (\textbf{Un peu moins})
    \item Utiliser une Dropbox, Google Drive, ... (\textbf{Déjà mieux mais toujours risqué ou manque de fonctionalités})
\end{itemize}

Solution : Utiliser un \textbf{système de gestion de version décentralisé}
(Distributed Version Control System (DVCS) pour les anglophiles).
\end{frame}

\begin{frame}{Un DVCS ?}
    \begin{itemize}
        \item \textbf{Version} Enregistre des \og{}instantanés\fg{} du projet.
        \item \textbf{Gestion} Revenir en arrière, voir des différences,
            fusionner des modifications.
        \item \textbf{Décentralisé} Chacun
            \begin{itemize}
                \item a sa copie (avec son historique) sur son PC,
                \item peut mettre sa copie (et son historique) en ligne,
                \item peut récupérer sur son PC les copies et historiques disponibles en ligne,
                \item peut fusionner différentes copies (semi-)automatiquement.
            \end{itemize}
        \item \textbf{Projet} n'importe quel répertoire (\og dossier\fg). Donc
            n'importe quoi : Bureautique, \LaTeX, code, images, musique\dots
    \end{itemize}
\end{frame}

\begin{frame}{Et Git dans tout ça ?}
\texttt{Git} a été créé en 2005 par Linus Torvalds (auteur de
\texttt{Linux}); le plus connu et utilisé.

À l'origine, interface en ligne de commande.

Aujourd'hui: aussi des interfaces graphiques, dont GitHub Desktop.
\end{frame}

\begin{frame}{Mais on m'avait parlé de GitHub !}
    Souvenez-vous...
    \begin{itemize}
        \item \textbf{Décentralisé} Chacun
            \begin{itemize}
                \item peut mettre sa copie (et son historique) en ligne,
                \item \dots
            \end{itemize}
    \end{itemize}

    Il y a plein d'"endroits" en ligne o\`u on peut envoyer son travail, GitHub
    est le plus connu.

    En plus de ça, GitHub a des fonctionnalités pour interagir avec des collaborateurs.
\end{frame}

\section{Principes de Git}

\begin{frame}{Concepts}
    \begin{itemize}
        \item espace de travail: les fichiers, répertoires... dans lesquels on
            travaille. Ils n'ont rien de spécial par rapport à d'autres sur
            l'ordinateur.
        \item Dépôt: espace de travail + historique, sur un ordinateur.
        \item Commit: "version", est le successeur d'une autre commit.
        \item Historique: la "chaine" de tous les commits, du plus anciens.
        \item Dépôt distant: un dépot qui se trouve chez GitHub.
    \end{itemize}
\end{frame}

\begin{frame}
\frametitle{Concept: le \textbf{commit}}

\begin{center}
    \includegraphics[width=0.9\textwidth]{img/commits.png}
\end{center}
\footnotesize{Les illustrations non-sourcées viennent de \url{https://git-scm.com/book}.}
\end{frame}

\begin{frame}{Actions}
    \begin{itemize}
        \item Créer un dépot sur GitHub.
        \item Cloner (faire une copie d') un dépot de GitHub sur son PC.
        \item Modifier/créer des fichiers (pas avec Git !).
        \item Ajouter un fichier modifié: il sera pris en compte dans le
            prochain commit.
        \item Faire un commit: créer une nouvelle version, qui contient les
            fichiers ajoutés. On y ajoute un commentaire (qui décrit les
            changements).
        \item Consulter un historique.
        \item Push: envoyer ses nouveaux commits sur GitHub.
        \item Pull: récupérer des changements de GitHub (qui ont été envoyés
            par quelqu'un d'autre).
        \item Merge: quand on Pull et qu'on a aussi des nouveaux commits sur
            son PC. Git essaye de fusionner automatiquement; s'il ne sais pas
            le faire, il demande.
    \end{itemize}
\end{frame}

\begin{frame}[standout]
    Questions ?
\end{frame}


\section{Utilisation: en pratique}

\begin{frame}{Créer un dépot sur GitHub}
    \includegraphics[scale=0.35]{img/github_desktop/new_repo.png}
\end{frame}

\begin{frame}{Forker un dépot sur GitHub}
    \includegraphics[scale=0.30]{img/github_desktop/fork.png}
\end{frame}

\begin{frame}{Ajouter un collaborateur sur GitHub}
    \includegraphics[scale=0.33]{img/github_desktop/colaborator.png}
\end{frame}

\begin{frame}{Cloner un dépot sur son PC}
    Deux étapes:
    \begin{enumerate}
    \item Prendre l'url du dépôt sur Github
    \item Donner l'url a Github desktop
    \end{enumerate}
	\begin{columns}    
    	\begin{column}{0.5\textwidth}
    		\includegraphics[scale=0.35]{img/github_desktop/clone_repo.png}\\ $ $\\
		\end{column}
		\begin{column}{0.5\textwidth}
    		\includegraphics[scale=0.3]{img/github_desktop/clone_repo_desktop_2.png}\\
    		{\small Pour ouvrir cette fenêtre : \\File $\rightarrow$ Clone repository}
		\end{column}
	\end{columns}
\end{frame}

\begin{frame}{Ajouter des fichiers}
	\begin{center}
	    \includegraphics[scale=0.5]{img/github_desktop/add_files.png}
	\end{center}
\end{frame}

\begin{frame}{Voir ce qui est ajouté}
	\begin{center}
	    \includegraphics[scale=0.5]{img/github_desktop/see_added.png}
	\end{center}
\end{frame}

\begin{frame}{Remarque: fichier texte vs binaire}
    \begin{itemize}
        \item Fichiers texte: programme, \LaTeX\dots\\
        \begin{center}
		    \includegraphics[scale=0.3]{img/github_desktop/see_added.png}\\
        \end{center}
        \item Fichiers binaires: le reste: Word, Writer, images, sons, PDF\dots\\
        \begin{center}
	 	   \includegraphics[scale=0.12]{img/github_desktop/binary_file.png}
        \end{center}
    \end{itemize}

\end{frame}

\begin{frame}{Créer un commit}
\begin{itemize}
    \item Créer un \texttt{commit} sur base des fichiers ajoutés.
    \item Message de \texttt{commit}: décrit les changements effectués.
\end{itemize}
\begin{center}
	 	   \includegraphics[scale=0.5]{img/github_desktop/commit.png}
\end{center}
\end{frame}

\begin{frame}{Visualiser l'historique}
	 	   \includegraphics[scale=0.22]{img/github_desktop/historique.png}
\end{frame}

\begin{frame}{Récupérer un fichier d'un commit passé}
    TODO: screenshots - on va êtres forcés de faire ça sur Github...
\end{frame}

\begin{frame}{Astuce: ignorer des fichiers}
    Des fichiers qu'on ne veut jamais dans Git (résultats de compilation,
    fichiers temporaires\dots) Cachez-les !

    NB: Cela crée un fichier \texttt{.gitignore}: celui-là, on le versionne.
	\begin{center}
	 	   \includegraphics[scale=0.35]{img/github_desktop/ignore.png}
	\end{center}
\end{frame}

\begin{frame}{Push: envoyer des commits sur GitHub}
	\begin{center}
	 	   \includegraphics[scale=0.35]{img/github_desktop/push.png}\\
	 	   \includegraphics[scale=0.35]{img/github_desktop/push_2.png}
	\end{center}
\end{frame}

\begin{frame}{Pull: récupérer des commits qui sont sur GitHub}
    
	\begin{center}
	 	   \includegraphics[scale=0.35]{img/github_desktop/pull.png}\\
	 	   \includegraphics[scale=0.35]{img/github_desktop/pull_2.png}
	\end{center}
\end{frame}

\begin{frame}{Merge non-automatique: quand il y a des conflits}
    Message d'erreur:\\
	 	   \includegraphics[scale=0.5]{img/github_desktop/conflit_1.png}
\end{frame}

\begin{frame}{Merge non-automatique: quand il y a des conflits}
    Trouver le(s) fichier(s) en conflit:\\
    \begin{center}
	 	   \includegraphics[scale=0.4]{img/github_desktop/conflit_2.png}
    \end{center}
\end{frame}

\begin{frame}{Merge non-automatique: quand il y a des conflits}
    Trouver le(s) endroit(s) en conflit:\\
    \begin{center}
	 	   \includegraphics[scale=0.4]{img/github_desktop/conflit_3.png}
    \end{center}
\end{frame}

\begin{frame}{Merge non-automatique: quand il y a des conflits}
    Choisir la version que l'on veut garder et commit:\\
    \begin{center}
	 	   \includegraphics[scale=0.4]{img/github_desktop/conflit_4.png}\\
	 	   \includegraphics[scale=0.2]{img/github_desktop/conflit_5.png}
    \end{center}
\end{frame}

\begin{frame}{Astuce: de l'aide !}
    On peut trouver de l'aide:
    TODO: A garder à cet endroit ?
        Github help: \url{https://help.github.com/}
\end{frame}


\section{Installation et configuration}

\begin{frame}{Installer GitHub desktop}
\begin{itemize}
    \item Sur les ordinateur Windows UCL: suivez les instructions à l'addresse {\small\url{https://louvainlinux.org/git-windows-ucl}}.
    \item Ou installez GitHub Desktop sur votre ordinateur :
    \begin{itemize}
        \item \textbf{Ubuntu} : \url{https://github.com/shiftkey/desktop/releases}
        \item \textbf{Windows ou OS X} : \url{https://desktop.github.com}
    \end{itemize}
\end{itemize}
\end{frame}

\begin{frame}{Configuration de base}

Git a besoin de deux informations de base sur vous pour pouvoir travailler
efficacement :

\begin{itemize}
\item \textbf{Nom et Prénom}
\item \textbf{Email}
\end{itemize}
TODO: screenshots

%L'option \lstinline{--global} permet de configurer \texttt{git} pour tous vos autres projets sur votre PC.
\end{frame}

\begin{frame}{Configuration de base -- Éditeur de textes}
    \textbf{Linux}
    \textbf{Windows}
    \textbf{Mac}
    TODO: screenshots
\end{frame}


\section{Exercices}

\begin{frame}{Exercice 1}
    TODO
\end{frame}

\begin{frame}{Exercice 2}
    TODO
\end{frame}


\section{Fonctionnalités plus avancées}

\subsection{Les branches}

\begin{frame}{De derrière: les objets git}
    \begin{itemize}
        \item Chaque commit a un identifiant: \textbf{12f87}b95caff8cbeb5ce0717528d77e27db5669c.
    \end{itemize}
    \begin{center}
    \includegraphics[width=0.8\textwidth]{img/commit-and-tree.png}
    \end{center}
\end{frame}

\begin{frame}{De derrière: les parents}
    \begin{itemize}
        \item Chaque commit a un parent.
    \end{itemize}
    \includegraphics[width=\textwidth]{img/commits-and-parents.png}
\end{frame}

\begin{frame}{De derrière: les étiquettes}
    \begin{itemize}
        \item On peut mettre des étiquettes sur des commits.
        \item \texttt{HEAD} est la position actuelle.
    \end{itemize}
    \includegraphics[width=\textwidth]{img/branch-and-history.png}
\end{frame}

\begin{frame}{Créer une branche}
    \begin{itemize}
        \item Une branche est une nouvelle étiquette.
        \item La branche par défaut est \texttt{master}.
    \end{itemize}
    \begin{center}
        \includegraphics[width=0.8\textwidth]{img/head-to-master.png}
    \end{center}
\end{frame}

\begin{frame}{Créer une branche: en pratique}
    TODO: screenshots
\end{frame}

\begin{frame}{Changer de branche}
    La branche courante est celle qui suit les nouveaux commits.
    \begin{columns}
        \begin{column}{0.44\textwidth}
            \begin{center}
                \includegraphics[width=\textwidth]{img/head-to-testing.png}
            \end{center}
        \end{column}
        \begin{column}{0.54\textwidth}
            \includegraphics[width=\textwidth]{img/advance-testing.png}
        \end{column}
    \end{columns}
\end{frame}

\begin{frame}{Changer de branche: en pratique}
    TODO: screenshots
\end{frame}

\begin{frame}{Branches divergentes}
    \begin{itemize}
        \item Utilité: travailler sur des modifications indépendantes.
    \end{itemize}
    \begin{center}
        \includegraphics[width=0.8\textwidth]{img/advance-master.png}
    \end{center}
\end{frame}

\begin{frame}{Résultat: embranchement dans l'historique}
    TODO: screenshots
\end{frame}

\begin{frame}{Fusionner des modifications}
\begin{center}
    \includegraphics[width=0.9\textwidth,trim=0 0 0 40, clip]{img/basic-merging-1.png}
    \includegraphics[width=\textwidth,trim=0 0 0 60, clip]{img/basic-merging-2.png}
\end{center}
\end{frame}

\begin{frame}{Fusionner des modifications: en pratique}
    TODO: screenshots

    Et parfois il faut résoudre des conflits\dots
\end{frame}


\subsection{Autre modèle de collaboration}

\begin{frame}{Fork -- Pull Request}
    Une autre méthode de collaboration, très utilisée pour des larges projets
    et/ou projets o\`u la contribution est ouverte à tous.
    \begin{center}
        \includegraphics[width=\textwidth]{img/github-setup.png}
    \end{center}
\end{frame}

\begin{frame}{Fork -- Pull Request: Méthode de travail}
    Ajouter un "upstream". TODO: ref vers une explication / voir comment ça marche ave github desktop
    \begin{center}
        \includegraphics[width=\textwidth]{img/github-workflow.jpg}
    \end{center}
\end{frame}

\subsection{Divers}

\begin{frame}{Renommer un fichier}
    TODO: screenshots
\end{frame}

\begin{frame}{Créer un dépôt local}
    TODO: screenshots
\end{frame}

\section{Informations et ressources}

\begin{frame}{Github, Bitbucket, Gitlab}
    \begin{center}
        \includegraphics[width=0.65\textwidth]{img/github-bitbucket.png} \\
        \includegraphics[width=0.55\textwidth]{img/gitlab.png}
    \end{center}
    Pratiquement identiques (tous fonctionnent avec GitHub Desktop).
\end{frame}

\begin{frame}{Github Student Pack}
    Dépôts privés gratuits (tout comme sur Gitlab \& Bitbucket), et d'autres avantages: \url{https://education.github.com/pack}.

    Nécessite d'ajouter l'addresse \texttt{...@student.uclouvain.be} au compte
    GitHub.
\end{frame}

\begin{frame}{Interface en ligne de commande}
    Utilisée par beaucoup de gens , très puissante si vous êtes à l'aise avec
    un terminal.

    Installation:
    \begin{itemize}
        \item \textbf{Ubuntu} : \texttt{sudo apt-get install git}
        \item \textbf{OS X} : \url{https://sourceforge.net/projects/git-osx-installer/}
        \item \textbf{Windows} : \url{https://git-for-windows.github.io/} (déjà
            installé à l'UCL)
    \end{itemize}

    Documentation:
    \begin{itemize}
        \item \textbf{La référence: Git book}: \url{https://git-scm.com/book}:
            abordable, bien expliqué et très complet !
        \item \texttt{git help}, \texttt{git <command> help}
        \item TODO: autre bon tuto ?
    \end{itemize}
\end{frame}

\begin{frame}{Autres interfaces graphiques}
    \begin{itemize}
        \item \url{https://git-scm.com/docs/gitk} (Installé par défaut sur PC UCL)
        \item \url{https://www.gitkraken.com/}
        \item \url{https://desktop.github.com/}
        \item D'autres: \url{https://git-scm.com/downloads/guis}
    \end{itemize}
\end{frame}

\begin{frame}[standout]
    Questions ?
\end{frame}

\end{document}

